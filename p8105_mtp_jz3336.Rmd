---
title: "Midterm Project"
author: Jiayi Zhou
output: github_document
---

```{r setup, include = FALSE}
library(tidyverse)
library(readxl)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Problem 1: Data

**Raw dataset**:
The dog weights raw dataset has six variables. The first column contains the date of each weighing from August 12nd, 2018 to September 7th, 2020, while some dates in this period were not recorded. The second to fifth columns contain information about the weights of three dogs and a standard object: Raisin, Simon, Gagne, and std. All weights were recorded in the unit of Lbs and Oz. The last column contains occasional notes about kennel. 

```{r}
dogweights_df =
  read_excel("./dogweights_07sept2020.xlsx", skip = 1) %>% 
  janitor::clean_names() %>%
  mutate(date = as.numeric(date),
         date = janitor::excel_numeric_to_date(date)) %>% 
  select(-x6) %>% 
  separate(date, into = c("year", "month", "day"), sep = "-" ) %>% 
  pivot_longer(
    raisin:std,
    names_to = "dognames_and_std",
    values_to = "weights"
  ) %>% 
  separate(weights, into = c("Lbs", "Oz"), sep = " ") %>% 
  mutate(
    Lbs = as.numeric(Lbs),
    Oz = as.numeric(Oz),
    weights_in_Lbs = Lbs + Oz * 0.0625
    ) %>% 
  drop_na(weights_in_Lbs, year) %>% 
  select(-Lbs, -Oz)

dogweights_df
```
**Descriptions of the steps for tidying the dogweights_df dataframe**:
variable, then the excel_numeric_to_date from the janitor package was used to convert the serial number observations to date class. For better readability and convenient filtering that might take place in the future, I further separate "date" into "year", "month", and "day". Next, I put all dog names and the "std" representing standard objects all into the dognames_and_std columns since they are all names. The weights associated with each name on each day were also converted to Lbs and then organized into "weights_in_Lbs" columns. To convert the weight unit, separation of the weight in Lbs and weights in Oz was done first. Then, weights in Oz times coefficient 0.0625 was added back to Lbs to get the total weight in single unit Lbs. Furthermore, the NAs in the new variable "weights_in_Lbs" can be dropped without interfering with other useful observations. There were also several NAs in the three date-related variables resulted from an "s" entry in "date" in the raw dataset. Thus, I chose to drop all missing values in "year" which helped me to leave out all NAs associated with the "s" entry. the date of each weighing from August 12nd, 2018 to September 7th, 2020, while some dates in this period were not recorded. The second to fifth columns contain information about the weights of three dogs and a standard object: Raisin, Simon, Gagne, and std. All weights were recorded in the unit of Lbs and Oz. The last column contains occasional notes. 