Midterm Project
================
Jiayi Zhou

## Problem 1: Data

**Description on the raw dataset**: The dog weights raw dataset has six
variables. The first column contains the date of each weighing from
August 12nd, 2018 to September 7th, 2020, while some dates in this
period were not recorded. The second to fifth columns contain
information about the weights of three dogs and a standard object:
Raisin, Simon, Gagne, and std. All weights were recorded in the unit of
Lbs and Oz. The last column contains occasional notes about kennel.

**First dataframe about dog weights**

``` r
dogweights_df =
  read_excel("./data/dogweights_07sept2020.xlsx", skip = 1) %>% 
  janitor::clean_names() %>%
  mutate(date = as.numeric(date),
         date = janitor::excel_numeric_to_date(date)) %>% 
  select(-x6) %>% 
  separate(date, into = c("year", "month", "day"), sep = "-" ) %>% 
  pivot_longer(
    raisin:std,
    names_to = "dognames_and_std",
    values_to = "weights"
  ) %>% 
  separate(weights, into = c("Lbs", "Oz"), sep = " ") %>% 
  mutate(
    Lbs = as.numeric(Lbs),
    Oz = as.numeric(Oz),
    weights_in_lbs = Lbs + Oz * 0.0625
    ) %>% 
  drop_na(weights_in_lbs, year) %>% 
  select(-Lbs, -Oz)
```

    ## New names:
    ## * `` -> ...6

    ## Warning: Problem with `mutate()` input `date`.
    ## ℹ NAs introduced by coercion
    ## ℹ Input `date` is `as.numeric(date)`.

    ## Warning in mask$eval_all_mutate(dots[[i]]): NAs introduced by coercion

    ## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 2 rows [157,
    ## 465].

``` r
dogweights_df
```

    ## # A tibble: 550 x 5
    ##    year  month day   dognames_and_std weights_in_lbs
    ##    <chr> <chr> <chr> <chr>                     <dbl>
    ##  1 2018  08    12    raisin                     19.8
    ##  2 2018  08    12    simone                     10.9
    ##  3 2018  08    12    gagne                      10.6
    ##  4 2018  08    19    raisin                     20.2
    ##  5 2018  08    19    simone                     11.1
    ##  6 2018  08    19    gagne                      10.8
    ##  7 2018  08    19    std                        21.0
    ##  8 2018  08    22    raisin                     20.2
    ##  9 2018  08    22    simone                     11.2
    ## 10 2018  08    22    gagne                      10.8
    ## # … with 540 more rows

**Descriptions of the steps for tidying the dogweights\_df dataframe**:
First, I imported the raw excel dataset using the readxl package. After
cleaning up the variable names, I noticed that the observations in
“date” were shown as five digits serial numbers rather than readable
dates. Thus, I first used as\_numeric from mutate to transfer “date”
from a character variable to numeric variable, then the
excel\_numeric\_to\_date from the janitor package was used to convert
the serial number observations to date class. For better readability and
convenient filtering that might take place in the future, I further
separate “date” into “year”, “month”, and “day”. Next, I put all dog
names and the “std” representing standard objects all into the
dognames\_and\_std columns since they are all names. The weights
associated with each name on each day were also converted to Lbs and
then organized into “weights\_in\_Lbs” columns. To convert the weight
unit, separation of the weight in Lbs and weights in Oz was done first.
Then, weights in Oz times coefficient 0.0625 was added back to Lbs to
get the total weight in single unit Lbs. Furthermore, the missing value
in the new variable “weights\_in\_Lbs” can be dropped without
interfering with other useful observations. There were also several NAs
in the three date-related variables resulted from an “s” entry in “date”
in the raw dataset. Thus, I chose to drop all missing values in “year”
which helped me to leave out all NAs associated with the “s” entry. the
date of each weighing from August 12nd, 2018 to September 7th, 2020,
while some dates in this period were not recorded. The second to fifth
columns contain information about the weights of three dogs and a
standard object: Raisin, Simon, Gagne, and std. All weights were
recorded in the unit of Lbs and Oz. The last column contains occasional
notes.

**Second dataframe about notes**

``` r
notes_df =
  read_excel("./data/dogweights_07sept2020.xlsx", skip = 1) %>% 
  janitor::clean_names() %>%
  mutate(date = as.numeric(date),
         date = janitor::excel_numeric_to_date(date)) %>% 
  rename(note = x6) %>% 
  select(date, note) %>% 
  separate(date, into = c("year", "month", "day"), sep = "-" ) %>% 
  drop_na(year, note)
```

    ## New names:
    ## * `` -> ...6

    ## Warning: Problem with `mutate()` input `date`.
    ## ℹ NAs introduced by coercion
    ## ℹ Input `date` is `as.numeric(date)`.

    ## Warning in mask$eval_all_mutate(dots[[i]]): NAs introduced by coercion

``` r
notes_df
```

    ## # A tibble: 14 x 4
    ##    year  month day   note                                                       
    ##    <chr> <chr> <chr> <chr>                                                      
    ##  1 2018  08    27    Right after leaving for 3 days at Weber's                  
    ##  2 2018  09    04    at camp bow wow                                            
    ##  3 2018  10    01    dogs at Webers from Sept 18-30                             
    ##  4 2018  10    09    dogs at Webers from Oct 5-8                                
    ##  5 2018  10    16    on 10/15 all had hair cuts                                 
    ##  6 2018  10    22    dogs at Webers from Oct 18-22                              
    ##  7 2018  11    18    dogs at Webers from Nov 10-17                              
    ##  8 2019  01    08    Simone/Gagne  at Webers from Dec 20-Jan 4, Raisin at PC De…
    ##  9 2019  09    06    Gagne died 9/8/2019                                        
    ## 10 2019  11    04    on vacation? Dogs at kennel?                               
    ## 11 2020  02    03    at Kennel?                                                 
    ## 12 2020  05    23    first haircut in 3-4 months                                
    ## 13 2020  06    23    in PC June 23-July 10, no wts taken, Raisin with us, Simon…
    ## 14 2020  08    07    in Denver and PC aug 9-aug 31, no wts taken, Raisin with u…

**Export the two dataframes as CSVs**

``` r
write.csv(dogweights_df, "./data/dogweights.csv")
write.csv(notes_df, "./data/notes.csv")
```

## Problem 2: EDA

**Description of the cleaned dogweights\_df dataset**: The tidy dataset
now is consists of 5 variables and 550 observations. The variables are
“year”, “month”, “day”, “dognames\_and\_std”, and “weights\_in\_Lbs”.
The “note” column in the raw dataset was omitted.

``` r
unique_dates=
  dogweights_df %>% 
  group_by(year, month, day) %>% 
  distinct(year) %>% 
  nrow()
```

The number of unique dates in the tidy dog-weights dataset is 201. This
number of unique dates is less than the number of unique dates in the
raw dataset, because the tidy dataset has omitted dates with no weight
records and dates that cannot be converted to readable names.
